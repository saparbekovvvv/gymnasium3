{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/appPages/site/components/pages/news/NewsDetailCotnent/NewsDetailContent.module.scss.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_export_value__({\n  \"NewsDetailContent\": \"NewsDetailContent-module-scss-module__ntNw9W__NewsDetailContent\",\n  \"actionButton\": \"NewsDetailContent-module-scss-module__ntNw9W__actionButton\",\n  \"addComment\": \"NewsDetailContent-module-scss-module__ntNw9W__addComment\",\n  \"addNewComment\": \"NewsDetailContent-module-scss-module__ntNw9W__addNewComment\",\n  \"avatar\": \"NewsDetailContent-module-scss-module__ntNw9W__avatar\",\n  \"cancelButton\": \"NewsDetailContent-module-scss-module__ntNw9W__cancelButton\",\n  \"comment\": \"NewsDetailContent-module-scss-module__ntNw9W__comment\",\n  \"commentActions\": \"NewsDetailContent-module-scss-module__ntNw9W__commentActions\",\n  \"commentAuthor\": \"NewsDetailContent-module-scss-module__ntNw9W__commentAuthor\",\n  \"commentContent\": \"NewsDetailContent-module-scss-module__ntNw9W__commentContent\",\n  \"commentDate\": \"NewsDetailContent-module-scss-module__ntNw9W__commentDate\",\n  \"commentForm\": \"NewsDetailContent-module-scss-module__ntNw9W__commentForm\",\n  \"commentHeader\": \"NewsDetailContent-module-scss-module__ntNw9W__commentHeader\",\n  \"commentInfo\": \"NewsDetailContent-module-scss-module__ntNw9W__commentInfo\",\n  \"commentsSection\": \"NewsDetailContent-module-scss-module__ntNw9W__commentsSection\",\n  \"content\": \"NewsDetailContent-module-scss-module__ntNw9W__content\",\n  \"formActions\": \"NewsDetailContent-module-scss-module__ntNw9W__formActions\",\n  \"loginPrompt\": \"NewsDetailContent-module-scss-module__ntNw9W__loginPrompt\",\n  \"moreButton\": \"NewsDetailContent-module-scss-module__ntNw9W__moreButton\",\n  \"newsContent\": \"NewsDetailContent-module-scss-module__ntNw9W__newsContent\",\n  \"newsInfo\": \"NewsDetailContent-module-scss-module__ntNw9W__newsInfo\",\n  \"news_head\": \"NewsDetailContent-module-scss-module__ntNw9W__news_head\",\n  \"reply\": \"NewsDetailContent-module-scss-module__ntNw9W__reply\",\n  \"replyForm\": \"NewsDetailContent-module-scss-module__ntNw9W__replyForm\",\n  \"replyWrapper\": \"NewsDetailContent-module-scss-module__ntNw9W__replyWrapper\",\n  \"replyingTo\": \"NewsDetailContent-module-scss-module__ntNw9W__replyingTo\",\n  \"submitButton\": \"NewsDetailContent-module-scss-module__ntNw9W__submitButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/redux/api/news/csrf.ts"],"sourcesContent":["export function getCSRFToken(): string | null {\r\n  const name = 'csrftoken';\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop()?.split(';').shift() || null;\r\n  return null;\r\n}"],"names":[],"mappings":";;;AAAO,SAAS;IACd,MAAM,OAAO;IACb,MAAM,QAAQ,CAAC,EAAE,EAAE,SAAS,MAAM,CAAC,CAAC;IACpC,MAAM,QAAQ,MAAM,KAAK,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IACtC,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,MAAM,GAAG,IAAI,MAAM,KAAK,WAAW;IAClE,OAAO;AACT"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/redux/api/news/index.ts"],"sourcesContent":["import { api as index } from \"..\";\r\nimport { getCSRFToken } from './csrf';\r\n\r\nconst ENDPOINTS = process.env.NEXT_PUBLIC_ENDPOINT;\r\n\r\ninterface AddCommentRequest {\r\n  newsId: number;\r\n  text: string;\r\n  parentId?: number;\r\n}\r\n\r\nconst api = index.injectEndpoints({\r\n  endpoints: (build) => ({\r\n    getNews: build.query<NEWS.GetNewsResponse, NEWS.GetNewsRequest>({\r\n      query: () => ({\r\n        url: `${ENDPOINTS}/news/`,\r\n        method: \"GET\",\r\n      }),\r\n      providesTags: [\"news\"],\r\n    }),\r\n    getDetNews: build.query<NEWS.GetDetNewsResponse, number>({\r\n      query: (id) => ({\r\n        url: `${ENDPOINTS}/news/${id}/`,\r\n        method: \"GET\",\r\n      }),\r\n      providesTags: [\"news\"],\r\n    }),\r\n    getComments: build.query<NEWS.GetCommentsResponse, number>({\r\n      query: (newsId) => ({\r\n        url: `${ENDPOINTS}/news/${newsId}/comments/`,\r\n        method: \"GET\",\r\n      }),\r\n      providesTags: [\"comments\"],\r\n    }),\r\n    addComment: build.mutation<NEWS.AddCommentResponse, AddCommentRequest>({\r\n      query: ({ newsId, text, parentId }) => ({\r\n        url: parentId ? `${ENDPOINTS}/comments/${parentId}/reply/` : `${ENDPOINTS}/news/${newsId}/comments/`,\r\n        method: \"POST\",\r\n        body: JSON.stringify({ text }),\r\n        credentials: 'include',\r\n        headers: {\r\n          'X-CSRFToken': getCSRFToken() || '',\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }),\r\n      invalidatesTags: [\"comments\"],\r\n    }),\r\n    updateComment: build.mutation<NEWS.UpdateCommentResponse, NEWS.UpdateCommentRequest>({\r\n      query: ({ commentId, text, parentId }) => ({\r\n        url: parentId\r\n          ? `${ENDPOINTS}/comments/${parentId}/replies/${commentId}/`\r\n          : `${ENDPOINTS}/comments/${commentId}/`,\r\n        method: \"PATCH\",\r\n        body: JSON.stringify({ text }),\r\n        credentials: 'include',\r\n        headers: {\r\n          'X-CSRFToken': getCSRFToken() || '',\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }),\r\n      invalidatesTags: [\"comments\"],\r\n    }),\r\n    deleteComment: build.mutation<NEWS.DeleteCommentResponse, NEWS.DeleteCommentRequest>({\r\n      query: ({ commentId, parentId }) => ({\r\n        url: parentId\r\n          ? `${ENDPOINTS}/comments/${parentId}/replies/${commentId}/`\r\n          : `${ENDPOINTS}/comments/${commentId}/`,\r\n        method: \"DELETE\",\r\n        credentials: 'include',\r\n        headers: {\r\n          'X-CSRFToken': getCSRFToken() || '',\r\n        },\r\n      }),\r\n      invalidatesTags: [\"comments\"],\r\n    }),\r\n    likeComment: build.mutation<NEWS.LikeCommentResponse, NEWS.LikeCommentRequest>({\r\n      query: ({ commentId }) => ({\r\n        url: `${ENDPOINTS}/comments/like/`,\r\n        method: \"POST\",\r\n        body: JSON.stringify({ comment_id: commentId }),\r\n        credentials: 'include',\r\n        headers: {\r\n          'X-CSRFToken': getCSRFToken() || '',\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }),\r\n      invalidatesTags: [\"comments\"],\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const {\r\n  useGetNewsQuery,\r\n  useGetDetNewsQuery,\r\n  useGetCommentsQuery,\r\n  useAddCommentMutation,\r\n  useUpdateCommentMutation,\r\n  useDeleteCommentMutation,\r\n  useLikeCommentMutation,\r\n} = api;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
<<<<<<< HEAD
<<<<<<< HEAD
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/appPages/site/components/pages/news/NewsDetailCotnent/NewsDetailContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { Menu, MenuButton, MenuList, MenuItem } from \"@chakra-ui/react\";\r\nimport {\r\n  MoreVertical,\r\n  Edit,\r\n  Trash2,\r\n  MessageCircle,\r\n  ThumbsUp,\r\n} from \"lucide-react\";\r\nimport scss from \"./NewsDetailContent.module.scss\";\r\nimport {\r\n  useGetDetNewsQuery,\r\n  useGetCommentsQuery,\r\n  useAddCommentMutation,\r\n  useUpdateCommentMutation,\r\n  useDeleteCommentMutation,\r\n  useLikeCommentMutation,\r\n} from \"@/redux/api/news\";\r\n\r\nconst NewsDetailContent: React.FC = () => {\r\n  const params = useParams();\r\n  const newsId =\r\n    typeof params.newsDetail === \"string\"\r\n      ? parseInt(params.newsDetail, 10)\r\n      : NaN;\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [editingComment, setEditingComment] = useState<{\r\n    id: number;\r\n    text: string;\r\n    parentId?: number;\r\n  } | null>(null);\r\n  const [replyingTo, setReplyingTo] = useState<{\r\n    id: number;\r\n    author: string;\r\n  } | null>(null);\r\n  const [currentUser, setCurrentUser] = useState<string | null>(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const {\r\n    data: newsData,\r\n    isLoading: newsLoading,\r\n    error: newsError,\r\n  } = useGetDetNewsQuery(newsId);\r\n  const {\r\n    data: commentsData,\r\n    isLoading: commentsLoading,\r\n    error: commentsError,\r\n  } = useGetCommentsQuery(newsId);\r\n  const [addComment] = useAddCommentMutation();\r\n  const [updateComment] = useUpdateCommentMutation();\r\n  const [deleteComment] = useDeleteCommentMutation();\r\n  const [likeComment] = useLikeCommentMutation();\r\n\r\n  useEffect(() => {\r\n    const checkAuthStatus = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API}/${process.env.NEXT_PUBLIC_ENDPOINT}/accounts/user/`,\r\n          {\r\n            credentials: \"include\",\r\n          }\r\n        );\r\n        if (response.ok) {\r\n          const userData = await response.json();\r\n          setIsLoggedIn(userData.isAuthenticated);\r\n          setCurrentUser(userData.username);\r\n        } else {\r\n          setIsLoggedIn(false);\r\n          setCurrentUser(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Ошибка при проверке статуса аутентификации:\", error);\r\n        setIsLoggedIn(false);\r\n        setCurrentUser(null);\r\n      }\r\n    };\r\n\r\n    checkAuthStatus();\r\n  }, []);\r\n\r\n  const handleAddComment = useCallback(async () => {\r\n    if (commentText.trim() && isLoggedIn) {\r\n      try {\r\n        await addComment({\r\n          newsId,\r\n          text: commentText,\r\n          parentId: replyingTo?.id,\r\n        }).unwrap();\r\n        setCommentText(\"\");\r\n        setReplyingTo(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при добавлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [addComment, commentText, isLoggedIn, newsId, replyingTo]);\r\n\r\n  const handleUpdateComment = useCallback(async () => {\r\n    if (editingComment && editingComment.text.trim()) {\r\n      try {\r\n        await updateComment({\r\n          commentId: editingComment.id,\r\n          text: editingComment.text,\r\n          parentId: editingComment.parentId,\r\n        }).unwrap();\r\n        setEditingComment(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при обновлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [editingComment, updateComment]);\r\n\r\n  const handleDeleteComment = useCallback(\r\n    async (commentId: number, parentId?: number) => {\r\n      try {\r\n        await deleteComment({ commentId, parentId }).unwrap();\r\n      } catch (error) {\r\n        console.error(\"Ошибка при удалении комментария:\", error);\r\n      }\r\n    },\r\n    [deleteComment]\r\n  );\r\n\r\n  const handleLikeComment = useCallback(\r\n    async (commentId: number) => {\r\n      if (isLoggedIn) {\r\n        try {\r\n          await likeComment({ commentId }).unwrap();\r\n        } catch (error) {\r\n          console.error(\"Ошибка при лайке комментария:\", error);\r\n        }\r\n      }\r\n    },\r\n    [isLoggedIn, likeComment]\r\n  );\r\n\r\n  const renderCommentForm = useCallback(\r\n    (onSubmit: () => void, cancelAction: () => void) => (\r\n      <div className={scss.commentForm}>\r\n        <textarea\r\n          value={editingComment ? editingComment.text : commentText}\r\n          onChange={(e) =>\r\n            editingComment\r\n              ? setEditingComment({ ...editingComment, text: e.target.value })\r\n              : setCommentText(e.target.value)\r\n          }\r\n          placeholder=\"Напишите ваш комментарий\"\r\n        />\r\n        <div className={scss.formActions}>\r\n          <button onClick={onSubmit} className={scss.submitButton}>\r\n            Отправить\r\n          </button>\r\n          <button onClick={cancelAction} className={scss.cancelButton}>\r\n            Отмена\r\n          </button>\r\n        </div>\r\n      </div>\r\n    ),\r\n    [editingComment, commentText]\r\n  );\r\n\r\n  const renderCommentActions = useCallback(\r\n    (comment: any, depth: number) => (\r\n      <div className={scss.commentActions}>\r\n        <button\r\n          onClick={() => handleLikeComment(comment.id)}\r\n          className={scss.actionButton}\r\n        >\r\n          <ThumbsUp size={16} />\r\n          <span>{comment.likes_count}</span>\r\n        </button>\r\n        {isLoggedIn && depth === 0 && (\r\n          <button\r\n            onClick={() =>\r\n              setReplyingTo({ id: comment.id, author: comment.author })\r\n            }\r\n            className={scss.actionButton}\r\n          >\r\n            <MessageCircle size={16} />\r\n            <span>Ответить</span>\r\n          </button>\r\n        )}\r\n        {currentUser === comment.author && (\r\n          <Menu>\r\n            <MenuButton as=\"button\" className={scss.moreButton}>\r\n              <MoreVertical size={16} />\r\n            </MenuButton>\r\n            <MenuList>\r\n              <MenuItem\r\n                onClick={() =>\r\n                  setEditingComment({\r\n                    id: comment.id,\r\n                    text: comment.text,\r\n                    parentId: comment.parent,\r\n                  })\r\n                }\r\n              >\r\n                <Edit size={16} />\r\n                <span>Редактировать</span>\r\n              </MenuItem>\r\n              <MenuItem\r\n                onClick={() => handleDeleteComment(comment.id, comment.parent)}\r\n              >\r\n                <Trash2 size={16} />\r\n                <span>Удалить</span>\r\n              </MenuItem>\r\n            </MenuList>\r\n          </Menu>\r\n        )}\r\n      </div>\r\n    ),\r\n    [currentUser, handleDeleteComment, handleLikeComment, isLoggedIn]\r\n  );\r\n\r\n  const renderComment = useCallback(\r\n    (comment: any, depth = 0) => (\r\n      <div\r\n        key={comment.id}\r\n        className={`${scss.comment} ${depth > 0 ? scss.reply : \"\"}`}\r\n      >\r\n        <div className={scss.commentHeader}>\r\n          <Image\r\n            src={`https://api.dicebear.com/6.x/initials/svg?seed=${comment.author}`}\r\n            alt={comment.author}\r\n            width={40}\r\n            height={40}\r\n            className={scss.avatar}\r\n          />\r\n          <div className={scss.commentInfo}>\r\n            <span className={scss.commentAuthor}>{comment.author}</span>\r\n            <span className={scss.commentDate}>\r\n              {new Date(comment.created_at).toLocaleString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <p className={scss.commentContent}>{comment.text}</p>\r\n        {renderCommentActions(comment, depth)}\r\n        {editingComment &&\r\n          editingComment.id === comment.id &&\r\n          renderCommentForm(handleUpdateComment, () => setEditingComment(null))}\r\n        {comment.replies &&\r\n          comment.replies.map((reply: any) => (\r\n            <div key={reply.id} className={scss.replyWrapper}>\r\n              {renderComment(reply, depth + 1)}\r\n            </div>\r\n          ))}\r\n      </div>\r\n    ),\r\n    [\r\n      editingComment,\r\n      handleUpdateComment,\r\n      renderCommentActions,\r\n      renderCommentForm,\r\n    ]\r\n  );\r\n\r\n  if (isNaN(newsId)) {\r\n    return <div className={scss.error}>Неверный идентификатор новости</div>;\r\n  }\r\n\r\n  if (newsLoading || commentsLoading)\r\n    return <div className={scss.loading}>Загрузка...</div>;\r\n  if (newsError || commentsError)\r\n    return (\r\n      <div className={scss.error}>Произошла ошибка при загрузке данных</div>\r\n    );\r\n  if (!newsData) return <div className={scss.error}>Новость не найдена</div>;\r\n\r\n  return (\r\n    <div className={scss.NewsDetailContent}>\r\n      <div className=\"container\">\r\n        <div className={scss.content}>\r\n          <div className={scss.news_head}>\r\n            <h1>Новости</h1>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.newsContent}>\r\n            <h1>{newsData.description}</h1>\r\n            <Image\r\n              src={newsData.image}\r\n              alt={newsData.description}\r\n              width={700}\r\n              height={500}\r\n              quality={70}\r\n              property=\"img\"\r\n            />\r\n            <p>{newsData.content}</p>\r\n            <div className={scss.newsInfo}>\r\n              <p>Автор: {newsData.author}</p>\r\n              <p>\r\n                Дата публикации:{\" \"}\r\n                {new Date(newsData.created_at).toLocaleString()}\r\n              </p>\r\n              <p>\r\n                Последнее обновление:{\" \"}\r\n                {new Date(newsData.updated_at).toLocaleString()}\r\n              </p>\r\n            </div>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.commentsSection}>\r\n            <h2>Комментарии</h2>\r\n            {commentsData &&\r\n              commentsData.map((comment) => renderComment(comment))}\r\n            {isLoggedIn ? (\r\n              <div className={scss.addComment}>\r\n                {replyingTo ? (\r\n                  <p className={scss.replyingTo}>\r\n                    Ответ на комментарий пользователя {replyingTo.author}:\r\n                  </p>\r\n                ) : (\r\n                  <p className={scss.addNewComment}>\r\n                    Добавить новый комментарий:\r\n                  </p>\r\n                )}\r\n                {renderCommentForm(handleAddComment, () => {\r\n                  setReplyingTo(null);\r\n                  setCommentText(\"\");\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <p className={scss.loginPrompt}>\r\n                Пожалуйста, войдите в систему, чтобы оставить комментарий.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(NewsDetailContent);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
=======
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/appPages/site/components/pages/news/NewsDetailCotnent/NewsDetailContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { Menu, MenuButton, MenuList, MenuItem } from \"@chakra-ui/react\";\r\nimport {\r\n  MoreVertical,\r\n  Edit,\r\n  Trash2,\r\n  MessageCircle,\r\n  ThumbsUp,\r\n} from \"lucide-react\";\r\nimport scss from \"./NewsDetailContent.module.scss\";\r\nimport {\r\n  useGetDetNewsQuery,\r\n  useGetCommentsQuery,\r\n  useAddCommentMutation,\r\n  useUpdateCommentMutation,\r\n  useDeleteCommentMutation,\r\n  useLikeCommentMutation,\r\n} from \"@/redux/api/news\";\r\n\r\nconst NewsDetailContent: React.FC = () => {\r\n  const params = useParams();\r\n  const newsId =\r\n    typeof params.newsDetail === \"string\"\r\n      ? parseInt(params.newsDetail, 10)\r\n      : NaN;\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [editingComment, setEditingComment] = useState<{\r\n    id: number;\r\n    text: string;\r\n    parentId?: number;\r\n  } | null>(null);\r\n  const [replyingTo, setReplyingTo] = useState<{\r\n    id: number;\r\n    author: string;\r\n  } | null>(null);\r\n  const [currentUser, setCurrentUser] = useState<string | null>(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const {\r\n    data: newsData,\r\n    isLoading: newsLoading,\r\n    error: newsError,\r\n  } = useGetDetNewsQuery(newsId);\r\n  const {\r\n    data: commentsData,\r\n    isLoading: commentsLoading,\r\n    error: commentsError,\r\n  } = useGetCommentsQuery(newsId);\r\n  const [addComment] = useAddCommentMutation();\r\n  const [updateComment] = useUpdateCommentMutation();\r\n  const [deleteComment] = useDeleteCommentMutation();\r\n  const [likeComment] = useLikeCommentMutation();\r\n\r\n  useEffect(() => {\r\n    const checkAuthStatus = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API}/${process.env.NEXT_PUBLIC_ENDPOINT}/accounts/user/`,\r\n          {\r\n            credentials: \"include\",\r\n          }\r\n        );\r\n        if (response.ok) {\r\n          const userData = await response.json();\r\n          setIsLoggedIn(userData.isAuthenticated);\r\n          setCurrentUser(userData.username);\r\n        } else {\r\n          setIsLoggedIn(false);\r\n          setCurrentUser(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Ошибка при проверке статуса аутентификации:\", error);\r\n        setIsLoggedIn(false);\r\n        setCurrentUser(null);\r\n      }\r\n    };\r\n\r\n    checkAuthStatus();\r\n  }, []);\r\n\r\n  const handleAddComment = useCallback(async () => {\r\n    if (commentText.trim() && isLoggedIn) {\r\n      try {\r\n        await addComment({\r\n          newsId,\r\n          text: commentText,\r\n          parentId: replyingTo?.id,\r\n        }).unwrap();\r\n        setCommentText(\"\");\r\n        setReplyingTo(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при добавлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [addComment, commentText, isLoggedIn, newsId, replyingTo]);\r\n\r\n  const handleUpdateComment = useCallback(async () => {\r\n    if (editingComment && editingComment.text.trim()) {\r\n      try {\r\n        await updateComment({\r\n          commentId: editingComment.id,\r\n          text: editingComment.text,\r\n          parentId: editingComment.parentId,\r\n        }).unwrap();\r\n        setEditingComment(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при обновлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [editingComment, updateComment]);\r\n\r\n  const handleDeleteComment = useCallback(\r\n    async (commentId: number, parentId?: number) => {\r\n      try {\r\n        await deleteComment({ commentId, parentId }).unwrap();\r\n      } catch (error) {\r\n        console.error(\"Ошибка при удалении комментария:\", error);\r\n      }\r\n    },\r\n    [deleteComment]\r\n  );\r\n\r\n  const handleLikeComment = useCallback(\r\n    async (commentId: number) => {\r\n      if (isLoggedIn) {\r\n        try {\r\n          await likeComment({ commentId }).unwrap();\r\n        } catch (error) {\r\n          console.error(\"Ошибка при лайке комментария:\", error);\r\n        }\r\n      }\r\n    },\r\n    [isLoggedIn, likeComment]\r\n  );\r\n\r\n  const renderCommentForm = useCallback(\r\n    (onSubmit: () => void, cancelAction: () => void) => (\r\n      <div className={scss.commentForm}>\r\n        <textarea\r\n          value={editingComment ? editingComment.text : commentText}\r\n          onChange={(e) =>\r\n            editingComment\r\n              ? setEditingComment({ ...editingComment, text: e.target.value })\r\n              : setCommentText(e.target.value)\r\n          }\r\n          placeholder=\"Напишите ваш комментарий\"\r\n        />\r\n        <div className={scss.formActions}>\r\n          <button onClick={onSubmit} className={scss.submitButton}>\r\n            Отправить\r\n          </button>\r\n          <button onClick={cancelAction} className={scss.cancelButton}>\r\n            Отмена\r\n          </button>\r\n        </div>\r\n      </div>\r\n    ),\r\n    [editingComment, commentText]\r\n  );\r\n\r\n  const renderCommentActions = useCallback(\r\n    (comment: any, depth: number) => (\r\n      <div className={scss.commentActions}>\r\n        <button\r\n          onClick={() => handleLikeComment(comment.id)}\r\n          className={scss.actionButton}\r\n        >\r\n          <ThumbsUp size={16} />\r\n          <span>{comment.likes_count}</span>\r\n        </button>\r\n        {isLoggedIn && depth === 0 && (\r\n          <button\r\n            onClick={() =>\r\n              setReplyingTo({ id: comment.id, author: comment.author })\r\n            }\r\n            className={scss.actionButton}\r\n          >\r\n            <MessageCircle size={16} />\r\n            <span>Ответить</span>\r\n          </button>\r\n        )}\r\n        {currentUser === comment.author && (\r\n          <Menu>\r\n            <MenuButton as=\"button\" className={scss.moreButton}>\r\n              <MoreVertical size={16} />\r\n            </MenuButton>\r\n            <MenuList>\r\n              <MenuItem\r\n                onClick={() =>\r\n                  setEditingComment({\r\n                    id: comment.id,\r\n                    text: comment.text,\r\n                    parentId: comment.parent,\r\n                  })\r\n                }\r\n              >\r\n                <Edit size={16} />\r\n                <span>Редактировать</span>\r\n              </MenuItem>\r\n              <MenuItem\r\n                onClick={() => handleDeleteComment(comment.id, comment.parent)}\r\n              >\r\n                <Trash2 size={16} />\r\n                <span>Удалить</span>\r\n              </MenuItem>\r\n            </MenuList>\r\n          </Menu>\r\n        )}\r\n      </div>\r\n    ),\r\n    [currentUser, handleDeleteComment, handleLikeComment, isLoggedIn]\r\n  );\r\n\r\n  const renderComment = useCallback(\r\n    (comment: any, depth = 0) => (\r\n      <div\r\n        key={comment.id}\r\n        className={`${scss.comment} ${depth > 0 ? scss.reply : \"\"}`}\r\n      >\r\n        <div className={scss.commentHeader}>\r\n          <Image\r\n            src={`https://api.dicebear.com/6.x/initials/svg?seed=${comment.author}`}\r\n            alt={comment.author}\r\n            width={40}\r\n            height={40}\r\n            className={scss.avatar}\r\n          />\r\n          <div className={scss.commentInfo}>\r\n            <span className={scss.commentAuthor}>{comment.author}</span>\r\n            <span className={scss.commentDate}>\r\n              {new Date(comment.created_at).toLocaleString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <p className={scss.commentContent}>{comment.text}</p>\r\n        {renderCommentActions(comment, depth)}\r\n        {editingComment &&\r\n          editingComment.id === comment.id &&\r\n          renderCommentForm(handleUpdateComment, () => setEditingComment(null))}\r\n        {comment.replies &&\r\n          comment.replies.map((reply: any) => (\r\n            <div key={reply.id} className={scss.replyWrapper}>\r\n              {renderComment(reply, depth + 1)}\r\n            </div>\r\n          ))}\r\n      </div>\r\n    ),\r\n    [\r\n      editingComment,\r\n      handleUpdateComment,\r\n      renderCommentActions,\r\n      renderCommentForm,\r\n    ]\r\n  );\r\n\r\n  if (isNaN(newsId)) {\r\n    return <div className={scss.error}>Неверный идентификатор новости</div>;\r\n  }\r\n\r\n  if (newsLoading || commentsLoading)\r\n    return <div className={scss.loading}>Загрузка...</div>;\r\n  if (newsError || commentsError)\r\n    return (\r\n      <div className={scss.error}>Произошла ошибка при загрузке данных</div>\r\n    );\r\n  if (!newsData) return <div className={scss.error}>Новость не найдена</div>;\r\n\r\n  return (\r\n    <div className={scss.NewsDetailContent}>\r\n      <div className=\"container\">\r\n        <div className={scss.content}>\r\n          <div className={scss.news_head}>\r\n            <h1>Новости</h1>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.newsContent}>\r\n            <h1>{newsData.description}</h1>\r\n            <Image\r\n              src={newsData.image}\r\n              alt={newsData.description}\r\n              width={700}\r\n              height={500}\r\n              quality={70}\r\n              property=\"img\"\r\n            />\r\n            <p>{newsData.content}</p>\r\n            <div className={scss.newsInfo}>\r\n              <p>Автор: {newsData.author}</p>\r\n              <p>\r\n                Дата публикации:{\" \"}\r\n                {new Date(newsData.created_at).toLocaleString()}\r\n              </p>\r\n              <p>\r\n                Последнее обновление:{\" \"}\r\n                {new Date(newsData.updated_at).toLocaleString()}\r\n              </p>\r\n            </div>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.commentsSection}>\r\n            <h2>Комментарии</h2>\r\n            {commentsData &&\r\n              commentsData.map((comment) => renderComment(comment))}\r\n            {isLoggedIn ? (\r\n              <div className={scss.addComment}>\r\n                {replyingTo ? (\r\n                  <p className={scss.replyingTo}>\r\n                    Ответ на комментарий пользователя {replyingTo.author}:\r\n                  </p>\r\n                ) : (\r\n                  <p className={scss.addNewComment}>\r\n                    Добавить новый комментарий:\r\n                  </p>\r\n                )}\r\n                {renderCommentForm(handleAddComment, () => {\r\n                  setReplyingTo(null);\r\n                  setCommentText(\"\");\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <p className={scss.loginPrompt}>\r\n                Пожалуйста, войдите в систему, чтобы оставить комментарий.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(NewsDetailContent);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
>>>>>>> 3ddc0fb2368cc467b220467dc95a4a92fe885544
=======
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/appPages/site/components/pages/news/NewsDetailCotnent/NewsDetailContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { Menu, MenuButton, MenuList, MenuItem } from \"@chakra-ui/react\";\r\nimport {\r\n  MoreVertical,\r\n  Edit,\r\n  Trash2,\r\n  MessageCircle,\r\n  ThumbsUp,\r\n} from \"lucide-react\";\r\nimport scss from \"./NewsDetailContent.module.scss\";\r\nimport {\r\n  useGetDetNewsQuery,\r\n  useGetCommentsQuery,\r\n  useAddCommentMutation,\r\n  useUpdateCommentMutation,\r\n  useDeleteCommentMutation,\r\n  useLikeCommentMutation,\r\n} from \"@/redux/api/news\";\r\n\r\nconst NewsDetailContent: React.FC = () => {\r\n  const params = useParams();\r\n  const newsId =\r\n    typeof params.newsDetail === \"string\"\r\n      ? parseInt(params.newsDetail, 10)\r\n      : NaN;\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const [editingComment, setEditingComment] = useState<{\r\n    id: number;\r\n    text: string;\r\n    parentId?: number;\r\n  } | null>(null);\r\n  const [replyingTo, setReplyingTo] = useState<{\r\n    id: number;\r\n    author: string;\r\n  } | null>(null);\r\n  const [currentUser, setCurrentUser] = useState<string | null>(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const {\r\n    data: newsData,\r\n    isLoading: newsLoading,\r\n    error: newsError,\r\n  } = useGetDetNewsQuery(newsId);\r\n  const {\r\n    data: commentsData,\r\n    isLoading: commentsLoading,\r\n    error: commentsError,\r\n  } = useGetCommentsQuery(newsId);\r\n  const [addComment] = useAddCommentMutation();\r\n  const [updateComment] = useUpdateCommentMutation();\r\n  const [deleteComment] = useDeleteCommentMutation();\r\n  const [likeComment] = useLikeCommentMutation();\r\n\r\n  useEffect(() => {\r\n    const checkAuthStatus = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API}/${process.env.NEXT_PUBLIC_ENDPOINT}/accounts/user/`,\r\n          {\r\n            credentials: \"include\",\r\n          }\r\n        );\r\n        if (response.ok) {\r\n          const userData = await response.json();\r\n          setIsLoggedIn(userData.isAuthenticated);\r\n          setCurrentUser(userData.username);\r\n        } else {\r\n          setIsLoggedIn(false);\r\n          setCurrentUser(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Ошибка при проверке статуса аутентификации:\", error);\r\n        setIsLoggedIn(false);\r\n        setCurrentUser(null);\r\n      }\r\n    };\r\n\r\n    checkAuthStatus();\r\n  }, []);\r\n\r\n  const handleAddComment = useCallback(async () => {\r\n    if (commentText.trim() && isLoggedIn) {\r\n      try {\r\n        await addComment({\r\n          newsId,\r\n          text: commentText,\r\n          parentId: replyingTo?.id,\r\n        }).unwrap();\r\n        setCommentText(\"\");\r\n        setReplyingTo(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при добавлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [addComment, commentText, isLoggedIn, newsId, replyingTo]);\r\n\r\n  const handleUpdateComment = useCallback(async () => {\r\n    if (editingComment && editingComment.text.trim()) {\r\n      try {\r\n        await updateComment({\r\n          commentId: editingComment.id,\r\n          text: editingComment.text,\r\n          parentId: editingComment.parentId,\r\n        }).unwrap();\r\n        setEditingComment(null);\r\n      } catch (error) {\r\n        console.error(\"Ошибка при обновлении комментария:\", error);\r\n      }\r\n    }\r\n  }, [editingComment, updateComment]);\r\n\r\n  const handleDeleteComment = useCallback(\r\n    async (commentId: number, parentId?: number) => {\r\n      try {\r\n        await deleteComment({ commentId, parentId }).unwrap();\r\n      } catch (error) {\r\n        console.error(\"Ошибка при удалении комментария:\", error);\r\n      }\r\n    },\r\n    [deleteComment]\r\n  );\r\n\r\n  const handleLikeComment = useCallback(\r\n    async (commentId: number) => {\r\n      if (isLoggedIn) {\r\n        try {\r\n          await likeComment({ commentId }).unwrap();\r\n        } catch (error) {\r\n          console.error(\"Ошибка при лайке комментария:\", error);\r\n        }\r\n      }\r\n    },\r\n    [isLoggedIn, likeComment]\r\n  );\r\n\r\n  const renderCommentForm = useCallback(\r\n    (onSubmit: () => void, cancelAction: () => void) => (\r\n      <div className={scss.commentForm}>\r\n        <textarea\r\n          value={editingComment ? editingComment.text : commentText}\r\n          onChange={(e) =>\r\n            editingComment\r\n              ? setEditingComment({ ...editingComment, text: e.target.value })\r\n              : setCommentText(e.target.value)\r\n          }\r\n          placeholder=\"Напишите ваш комментарий\"\r\n        />\r\n        <div className={scss.formActions}>\r\n          <button onClick={onSubmit} className={scss.submitButton}>\r\n            Отправить\r\n          </button>\r\n          <button onClick={cancelAction} className={scss.cancelButton}>\r\n            Отмена\r\n          </button>\r\n        </div>\r\n      </div>\r\n    ),\r\n    [editingComment, commentText]\r\n  );\r\n\r\n  const renderCommentActions = useCallback(\r\n    (comment: any, depth: number) => (\r\n      <div className={scss.commentActions}>\r\n        <button\r\n          onClick={() => handleLikeComment(comment.id)}\r\n          className={scss.actionButton}\r\n        >\r\n          <ThumbsUp size={16} />\r\n          <span>{comment.likes_count}</span>\r\n        </button>\r\n        {isLoggedIn && depth === 0 && (\r\n          <button\r\n            onClick={() =>\r\n              setReplyingTo({ id: comment.id, author: comment.author })\r\n            }\r\n            className={scss.actionButton}\r\n          >\r\n            <MessageCircle size={16} />\r\n            <span>Ответить</span>\r\n          </button>\r\n        )}\r\n        {currentUser === comment.author && (\r\n          <Menu>\r\n            <MenuButton as=\"button\" className={scss.moreButton}>\r\n              <MoreVertical size={16} />\r\n            </MenuButton>\r\n            <MenuList>\r\n              <MenuItem\r\n                onClick={() =>\r\n                  setEditingComment({\r\n                    id: comment.id,\r\n                    text: comment.text,\r\n                    parentId: comment.parent,\r\n                  })\r\n                }\r\n              >\r\n                <Edit size={16} />\r\n                <span>Редактировать</span>\r\n              </MenuItem>\r\n              <MenuItem\r\n                onClick={() => handleDeleteComment(comment.id, comment.parent)}\r\n              >\r\n                <Trash2 size={16} />\r\n                <span>Удалить</span>\r\n              </MenuItem>\r\n            </MenuList>\r\n          </Menu>\r\n        )}\r\n      </div>\r\n    ),\r\n    [currentUser, handleDeleteComment, handleLikeComment, isLoggedIn]\r\n  );\r\n\r\n  const renderComment = useCallback(\r\n    (comment: any, depth = 0) => (\r\n      <div\r\n        key={comment.id}\r\n        className={`${scss.comment} ${depth > 0 ? scss.reply : \"\"}`}\r\n      >\r\n        <div className={scss.commentHeader}>\r\n          <Image\r\n            src={`https://api.dicebear.com/6.x/initials/svg?seed=${comment.author}`}\r\n            alt={comment.author}\r\n            width={40}\r\n            height={40}\r\n            className={scss.avatar}\r\n          />\r\n          <div className={scss.commentInfo}>\r\n            <span className={scss.commentAuthor}>{comment.author}</span>\r\n            <span className={scss.commentDate}>\r\n              {new Date(comment.created_at).toLocaleString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <p className={scss.commentContent}>{comment.text}</p>\r\n        {renderCommentActions(comment, depth)}\r\n        {editingComment &&\r\n          editingComment.id === comment.id &&\r\n          renderCommentForm(handleUpdateComment, () => setEditingComment(null))}\r\n        {comment.replies &&\r\n          comment.replies.map((reply: any) => (\r\n            <div key={reply.id} className={scss.replyWrapper}>\r\n              {renderComment(reply, depth + 1)}\r\n            </div>\r\n          ))}\r\n      </div>\r\n    ),\r\n    [\r\n      editingComment,\r\n      handleUpdateComment,\r\n      renderCommentActions,\r\n      renderCommentForm,\r\n    ]\r\n  );\r\n\r\n  if (isNaN(newsId)) {\r\n    return <div className={scss.error}>Неверный идентификатор новости</div>;\r\n  }\r\n\r\n  if (newsLoading || commentsLoading)\r\n    return <div className={scss.loading}>Загрузка...</div>;\r\n  if (newsError || commentsError)\r\n    return (\r\n      <div className={scss.error}>Произошла ошибка при загрузке данных</div>\r\n    );\r\n  if (!newsData) return <div className={scss.error}>Новость не найдена</div>;\r\n\r\n  return (\r\n    <div className={scss.NewsDetailContent}>\r\n      <div className=\"container\">\r\n        <div className={scss.content}>\r\n          <div className={scss.news_head}>\r\n            <h1>Новости</h1>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.newsContent}>\r\n            <h1>{newsData.description}</h1>\r\n            <Image\r\n              src={newsData.image}\r\n              alt={newsData.description}\r\n              width={700}\r\n              height={500}\r\n              quality={70}\r\n              property=\"img\"\r\n            />\r\n            <p>{newsData.content}</p>\r\n            <div className={scss.newsInfo}>\r\n              <p>Автор: {newsData.author}</p>\r\n              <p>\r\n                Дата публикации:{\" \"}\r\n                {new Date(newsData.created_at).toLocaleString()}\r\n              </p>\r\n              <p>\r\n                Последнее обновление:{\" \"}\r\n                {new Date(newsData.updated_at).toLocaleString()}\r\n              </p>\r\n            </div>\r\n            <hr />\r\n          </div>\r\n          <div className={scss.commentsSection}>\r\n            <h2>Комментарии</h2>\r\n            {commentsData &&\r\n              commentsData.map((comment) => renderComment(comment))}\r\n            {isLoggedIn ? (\r\n              <div className={scss.addComment}>\r\n                {replyingTo ? (\r\n                  <p className={scss.replyingTo}>\r\n                    Ответ на комментарий пользователя {replyingTo.author}:\r\n                  </p>\r\n                ) : (\r\n                  <p className={scss.addNewComment}>\r\n                    Добавить новый комментарий:\r\n                  </p>\r\n                )}\r\n                {renderCommentForm(handleAddComment, () => {\r\n                  setReplyingTo(null);\r\n                  setCommentText(\"\");\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <p className={scss.loginPrompt}>\r\n                Пожалуйста, войдите в систему, чтобы оставить комментарий.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(NewsDetailContent);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
>>>>>>> 7dfd0ddb (adds)
}